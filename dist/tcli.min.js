/* Tournament API | Copyright (c) Teijo Laine 2013 */
function getApi(a){function b(b,c,d,e,f){f=f||function(){};var g=a+d,h=JSON.stringify(c);$.ajax({type:b,url:g,dataType:"json",accept:"application/json",crossDomain:!0,data:h}).done(e).fail(function(a,b){f(b)})}function c(a){return function(b){a(b.id,b.data)}}if(!a)throw"Server URL required";var d=b.bind(void 0,"POST"),e=b.bind(void 0,"PUT"),f=b.bind(void 0,"GET",null),g=b.bind(void 0,"DELETE",null);return{createBracket:function(a){d({type:"bracket"},"bracket",c(a))},createGroup:function(a){d({type:"group"},"group",c(a))},saveBracket:function(a,b,c){e(b,"bracket/"+a,c)},saveGroup:function(a,b,c){e(b,"group/"+a,c)},getBracket:function(a,b){f("bracket/"+a,b)},getGroup:function(a,b){f("group/"+a,b)},listBrackets:function(a,b){f("bracket",a,b)},listGroups:function(a,b){f("group",a,b)},deleteBracket:function(a,b){g("bracket/"+a,b)},deleteGroup:function(a,b){g("group/"+a,b)}}}